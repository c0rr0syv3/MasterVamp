/* ==========================================
   MESA VIRTUAL — Vampiro: A Máscara
   Estilo consistente com landing e ficha
   ========================================== */

:root {
    --blood: #8a0000;
    --blood-dark: #4a0000;
    --blood-bright: #cc1111;
    --ash: #0e0b09;
    --stone: #1a1410;
    --parchment: #c8b89a;
    --gold: #c9a84c;
    --gold-dim: #7a6530;
    --bone: #e8dfc8;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    background: var(--ash);
    color: var(--bone);
    font-family: 'EB Garamond', Georgia, serif;
    font-size: 15px;
    min-height: 100vh;
    background-image:
        radial-gradient(ellipse at 20% 0%, rgba(100,0,0,0.15) 0%, transparent 55%),
        radial-gradient(ellipse at 80% 100%, rgba(60,0,0,0.12) 0%, transparent 55%);
}

#particles-canvas {
    position: fixed; inset: 0;
    z-index: 0; pointer-events: none;
}

/* ==================== CORNERS ==================== */
.corner {
    position: fixed; width: 70px; height: 70px;
    z-index: 2; pointer-events: none; opacity: 0.3;
}
.corner::before, .corner::after {
    content: ''; position: absolute; background: var(--blood);
}
.corner::before { width: 100%; height: 1px; top: 0; left: 0; }
.corner::after  { width: 1px; height: 100%; top: 0; left: 0; }
.corner-tl { top: 16px; left: 16px; }
.corner-tr { top: 16px; right: 16px; transform: scaleX(-1); }
.corner-bl { bottom: 16px; left: 16px; transform: scaleY(-1); }
.corner-br { bottom: 16px; right: 16px; transform: scale(-1); }

/* ==================== NAV ==================== */
.nav-bar {
    position: sticky; top: 0; z-index: 50;
    display: flex; align-items: center; justify-content: space-between;
    padding: 10px 24px;
    background: linear-gradient(180deg, rgba(8,5,3,0.97) 0%, rgba(14,11,9,0.92) 100%);
    border-bottom: 1px solid rgba(138,0,0,0.3);
    backdrop-filter: blur(8px);
}
.nav-user {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 0.2em;
    color: var(--gold-dim);
    text-transform: uppercase;
}
.btn-nav {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 7px 14px;
    border: 1px solid var(--gold-dim);
    background: rgba(20,15,10,0.9);
    color: var(--gold);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    transition: all 0.2s;
}
.btn-nav:hover { border-color: var(--blood-bright); color: #fff; background: rgba(100,0,0,0.3); }

/* ==================== CONTAINER ==================== */
.mesa-container {
    position: relative; z-index: 1;
    max-width: 1200px;
    margin: 0 auto;
    padding: 28px 24px 60px;
}

/* ==================== SCREEN (estado) ==================== */
.screen { animation: screenFade 0.35s ease-out; }
@keyframes screenFade {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
}

/* ==================== LOADING ==================== */
.loading-sigil {
    width: 80px; height: 80px;
    margin: 60px auto 20px;
    animation: spin 4s linear infinite;
    opacity: 0.5;
}
.loading-sigil svg { width: 100%; height: 100%; }
@keyframes spin { to { transform: rotate(360deg); } }
.loading-text {
    text-align: center;
    font-family: 'Cinzel', serif;
    font-size: 12px;
    letter-spacing: 0.3em;
    color: var(--gold-dim);
    text-transform: uppercase;
}

/* ==================== PAGE HEADER ==================== */
.page-header {
    text-align: center;
    margin-bottom: 28px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(138,0,0,0.2);
    position: relative;
}
.page-header::after {
    content: '◆';
    position: absolute;
    bottom: -8px; left: 50%;
    transform: translateX(-50%);
    color: var(--blood);
    font-size: 12px;
    background: var(--ash);
    padding: 0 8px;
}
.page-header h1 {
    font-family: 'Cinzel Decorative', serif;
    font-size: clamp(20px, 3.5vw, 32px);
    font-weight: 700;
    color: var(--blood-bright);
    text-shadow: 0 0 24px rgba(180,0,0,0.4);
    letter-spacing: 0.04em;
}
.page-header .page-sub {
    font-family: 'EB Garamond', serif;
    font-size: 14px;
    color: var(--parchment);
    opacity: 0.6;
    margin-top: 6px;
    font-style: italic;
}

/* ==================== TWO COL ==================== */
.two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}
@media (max-width: 700px) { .two-col { grid-template-columns: 1fr; } }

/* ==================== PANEL ==================== */
.panel {
    border: 1px solid rgba(138,0,0,0.25);
    background: linear-gradient(180deg, rgba(26,18,12,0.95) 0%, rgba(18,12,8,0.98) 100%);
    position: relative;
    overflow: hidden;
}
.panel::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--blood-dark), var(--blood), var(--blood-dark), transparent);
}
.panel-header {
    padding: 12px 18px 8px;
    border-bottom: 1px solid rgba(138,0,0,0.18);
    display: flex; align-items: center; gap: 10px;
}
.panel-header::after {
    content: '';
    flex: 1; height: 1px;
    background: linear-gradient(90deg, rgba(201,168,76,0.2), transparent);
}
.panel-header h2 {
    font-family: 'Cinzel', serif;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    color: var(--gold);
}
.panel-body { padding: 18px; display: flex; flex-direction: column; gap: 14px; }

/* ==================== FORM FIELDS ==================== */
.field-group { display: flex; flex-direction: column; gap: 5px; }
.field-group label {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold-dim);
}
.field-group input,
.field-group select,
.field-group textarea {
    background: transparent;
    border: none;
    border-bottom: 1px solid rgba(201,168,76,0.2);
    color: var(--bone);
    font-family: 'EB Garamond', serif;
    font-size: 14px;
    padding: 6px 2px;
    outline: none;
    transition: border-color 0.2s;
    width: 100%;
    resize: vertical;
}
.field-group input:focus,
.field-group select:focus,
.field-group textarea:focus { border-bottom-color: var(--blood-bright); }
.field-group input::placeholder,
.field-group textarea::placeholder { color: rgba(200,184,154,0.25); font-style: italic; }
.field-group select option { background: #1a1410; }

/* Number adjuster */
.number-row {
    display: flex; align-items: center; gap: 16px;
    margin-top: 4px;
}
.num-btn {
    width: 28px; height: 28px;
    border: 1px solid rgba(201,168,76,0.25);
    background: transparent;
    color: var(--gold);
    font-size: 18px;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.15s;
    line-height: 1;
}
.num-btn:hover { border-color: var(--blood-bright); color: #fff; background: rgba(100,0,0,0.3); }
.num-display {
    font-family: 'Cinzel Decorative', serif;
    font-size: 22px;
    color: var(--blood-bright);
    min-width: 30px;
    text-align: center;
}

/* ==================== BUTTONS ==================== */
.btn-primary {
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    padding: 11px 20px;
    border: 1px solid var(--blood);
    background: linear-gradient(135deg, rgba(120,0,0,0.75) 0%, rgba(70,0,0,0.95) 100%);
    color: #fff;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 7px;
    transition: all 0.2s;
    box-shadow: 0 0 12px rgba(138,0,0,0.2), inset 0 1px 0 rgba(255,60,60,0.08);
}
.btn-primary:hover {
    border-color: var(--blood-bright);
    box-shadow: 0 0 24px rgba(180,0,0,0.4);
}
.btn-primary svg { stroke: #ffaaaa; }
.full { width: 100%; }

.btn-ghost-sm {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    padding: 5px 12px;
    border: 1px solid rgba(201,168,76,0.2);
    background: transparent;
    color: var(--gold-dim);
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    transition: all 0.2s;
}
.btn-ghost-sm:hover { border-color: var(--gold); color: var(--gold); }

.btn-small {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    padding: 5px 10px;
    border: 1px solid rgba(201,168,76,0.2);
    background: rgba(20,14,10,0.8);
    color: var(--gold-dim);
    cursor: pointer;
    transition: all 0.2s;
    display: inline-flex; align-items: center; gap: 4px;
}
.btn-small:hover { border-color: var(--blood-bright); color: #fff; background: rgba(100,0,0,0.3); }
.btn-small.danger:hover { border-color: #cc1111; background: rgba(100,0,0,0.5); }
.btn-small.master-edit { border-color: rgba(201,168,76,0.35); color: var(--gold); }
.btn-small.master-edit:hover { border-color: var(--gold); color: #fff; background: rgba(100,75,0,0.3); }

/* ==================== MESAS LIST (lateral) ==================== */
.mesa-list-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    padding: 10px 12px;
    border: 1px solid rgba(138,0,0,0.2);
    background: rgba(0,0,0,0.2);
    margin-bottom: 8px;
    transition: border-color 0.2s;
    cursor: pointer;
}
.mesa-list-item:hover { border-color: rgba(138,0,0,0.5); }
.mesa-list-name {
    font-family: 'Cinzel', serif;
    font-size: 12px;
    color: var(--parchment);
}
.mesa-list-meta {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    color: var(--gold-dim);
    letter-spacing: 0.1em;
    white-space: nowrap;
}
.empty-note {
    font-size: 13px;
    color: rgba(200,184,154,0.35);
    font-style: italic;
    text-align: center;
    padding: 12px 0;
}

/* ==================== INTERIOR DA MESA ==================== */
.mesa-header-bar {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 20px;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(138,0,0,0.25);
}
.mesa-header-bar h1 {
    font-family: 'Cinzel Decorative', serif;
    font-size: clamp(18px, 3vw, 28px);
    color: var(--blood-bright);
    text-shadow: 0 0 20px rgba(180,0,0,0.35);
}
.mesa-header-actions { display: flex; gap: 8px; flex-wrap: wrap; }
.mesa-meta-row { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }
.meta-pill {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    padding: 3px 10px;
    border: 1px solid rgba(138,0,0,0.3);
    background: rgba(0,0,0,0.3);
    color: var(--gold-dim);
}

.prefs-banner {
    margin-bottom: 16px;
    padding: 10px 16px;
    border-left: 2px solid var(--blood);
    background: rgba(138,0,0,0.08);
    font-size: 13px;
    color: var(--parchment);
    font-style: italic;
}

.invite-box {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
    padding: 10px 16px;
    border: 1px solid rgba(201,168,76,0.2);
    background: rgba(0,0,0,0.25);
    flex-wrap: wrap;
}
.invite-label {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--gold-dim);
}
.invite-code {
    font-family: 'Cinzel', serif;
    font-size: 16px;
    letter-spacing: 0.3em;
    color: var(--blood-bright);
    text-shadow: 0 0 10px rgba(200,0,0,0.4);
}

.section-label {
    font-family: 'Cinzel', serif;
    font-size: 10px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 14px;
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(201,168,76,0.15);
}

/* ==================== CHAR GRID ==================== */
.char-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 16px;
}
.char-card {
    border: 1px solid rgba(138,0,0,0.25);
    background: linear-gradient(180deg, rgba(26,18,12,0.95) 0%, rgba(18,12,8,0.98) 100%);
    position: relative;
    overflow: hidden;
    transition: border-color 0.2s;
}
.char-card::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--blood-dark), var(--blood-dark), transparent);
}
.char-card:hover { border-color: rgba(138,0,0,0.5); }

.char-card-photo {
    width: 100%;
    height: 130px;
    object-fit: cover;
    object-position: center top;
    display: block;
    filter: grayscale(30%) brightness(0.85);
    background: #111;
}
.char-card-photo-placeholder {
    width: 100%; height: 130px;
    background: rgba(0,0,0,0.4);
    display: flex; align-items: center; justify-content: center;
}
.char-card-photo-placeholder svg { opacity: 0.15; }

.char-card-body { padding: 12px 14px 14px; }
.char-card-name {
    font-family: 'Cinzel', serif;
    font-size: 13px;
    color: var(--bone);
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.char-card-meta {
    font-size: 12px;
    color: var(--parchment);
    opacity: 0.6;
    line-height: 1.6;
}
.char-card-owner {
    font-family: 'Cinzel', serif;
    font-size: 9px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--gold-dim);
    margin-top: 6px;
    padding-top: 6px;
    border-top: 1px solid rgba(255,255,255,0.05);
}
.char-card-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 10px;
}
.master-badge {
    position: absolute; top: 10px; right: 10px;
    font-family: 'Cinzel', serif;
    font-size: 8px;
    letter-spacing: 0.1em;
    padding: 2px 6px;
    background: rgba(138,0,0,0.5);
    border: 1px solid rgba(200,0,0,0.4);
    color: #ffaaaa;
    text-transform: uppercase;
}

/* ==================== MODAL ==================== */
.modal-overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.85);
    z-index: 200;
    display: flex; align-items: center; justify-content: center;
    backdrop-filter: blur(4px);
}
.modal-box {
    background: linear-gradient(180deg, rgba(22,14,10,0.99) 0%, rgba(12,8,5,1) 100%);
    border: 1px solid rgba(138,0,0,0.45);
    width: 90%;
    max-width: 360px;
    position: relative;
    animation: panelSlide 0.3s ease-out;
}
.modal-box::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--blood), var(--blood-bright), var(--blood), transparent);
}
.modal-header {
    padding: 16px 20px 12px;
    border-bottom: 1px solid rgba(138,0,0,0.2);
}
.modal-header h3 {
    font-family: 'Cinzel', serif;
    font-size: 13px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--gold);
}
.modal-body {
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    text-align: center;
}
.modal-sub {
    font-size: 13px;
    color: var(--parchment);
    opacity: 0.7;
    font-style: italic;
}
.modal-code {
    font-family: 'Cinzel', serif;
    font-size: 22px;
    letter-spacing: 0.35em;
    color: var(--blood-bright);
    text-shadow: 0 0 14px rgba(200,0,0,0.5);
    padding: 14px 24px;
    border: 1px solid rgba(138,0,0,0.35);
    background: rgba(0,0,0,0.3);
    width: 100%;
}

@keyframes panelSlide {
    from { opacity: 0; transform: translateY(-16px) scale(0.97); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* ==================== TOAST ==================== */
.landing-toast {
    position: fixed;
    bottom: 24px; right: 24px;
    background: rgba(14,9,6,0.97);
    border: 1px solid var(--blood);
    color: var(--bone);
    font-family: 'Cinzel', serif;
    font-size: 11px;
    letter-spacing: 0.1em;
    padding: 10px 18px;
    z-index: 999;
    opacity: 0;
    transform: translateY(8px);
    transition: all 0.3s;
    pointer-events: none;
    max-width: 320px;
}
.landing-toast.show { opacity: 1; transform: translateY(0); }

/* ==========================================
   SISTEMA DE ROLAGEM — Dados WoD
   ========================================== */

/* Botão Rolar nos cards */
.btn-roll {
    border-color: rgba(201,168,76,0.35) !important;
    color: var(--gold) !important;
    background: rgba(30,22,5,0.85) !important;
}
.btn-roll:hover {
    border-color: var(--gold) !important;
    background: rgba(80,60,5,0.4) !important;
    color: #fff !important;
}

/* Modal de rolagem — maior e em duas colunas */
.roll-modal-box {
    max-width: 780px !important;
    width: 96vw !important;
}
.modal-close-btn {
    background: none; border: none;
    color: var(--gold-dim); cursor: pointer;
    font-size: 18px; line-height: 1; padding: 0 4px;
    transition: color 0.2s; align-self: flex-start;
}
.modal-close-btn:hover { color: var(--blood-bright); }
.roll-char-sub {
    font-family: 'EB Garamond', serif;
    font-size: 13px; font-style: italic;
    color: var(--blood-bright); margin-top: 3px; opacity: 0.85;
}

.roll-modal-body {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
    max-height: 70vh;
}
@media (max-width: 600px) {
    .roll-modal-body { grid-template-columns: 1fr; }
}

/* Coluna esquerda: lista de itens */
.roll-col-selecao {
    padding: 16px 16px 16px 20px;
    border-right: 1px solid rgba(138,0,0,0.2);
    overflow-y: auto;
    max-height: 70vh;
}
.roll-col-title {
    font-family: 'Cinzel', serif;
    font-size: 9px; letter-spacing: 0.2em;
    text-transform: uppercase; color: var(--gold-dim);
    margin-bottom: 12px;
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(201,168,76,0.12);
}
.roll-itens-lista { display: flex; flex-direction: column; gap: 10px; }
.roll-grupo { }
.roll-grupo-nome {
    font-family: 'Cinzel', serif; font-size: 8.5px;
    letter-spacing: 0.18em; text-transform: uppercase;
    color: var(--blood-bright); margin-bottom: 5px;
    padding-bottom: 3px;
    border-bottom: 1px solid rgba(138,0,0,0.15);
}
.roll-item {
    display: flex; align-items: center; gap: 7px;
    padding: 5px 6px; cursor: pointer;
    border: 1px solid transparent;
    transition: all 0.15s;
}
.roll-item:hover { background: rgba(138,0,0,0.06); border-color: rgba(138,0,0,0.15); }
.roll-item input[type="checkbox"] { display: none; }
.roll-item input:checked ~ .roll-item-nome { color: var(--bone); }
.roll-item input:checked ~ .roll-item-dots .dot-mini.active { background: var(--gold); }

/* Custom checkbox via pseudo: use a sibling approach */
.roll-check-indicator {
    width: 12px; height: 12px; flex-shrink: 0;
    border: 1px solid rgba(201,168,76,0.25);
    background: rgba(0,0,0,0.3);
    display: flex; align-items: center; justify-content: center;
    transition: all 0.15s;
}
.roll-item input:checked + .roll-check-indicator {
    background: var(--blood-dark); border-color: var(--blood-bright);
}
.roll-item input:checked + .roll-check-indicator::after {
    content: '✓'; font-size: 9px; color: #ffaaaa; line-height: 1;
}

.roll-item-nome {
    flex: 1; font-family: 'EB Garamond', serif; font-size: 13px;
    color: var(--parchment); opacity: 0.65; transition: all 0.15s;
}
.roll-item-dots { display: flex; gap: 2px; }
.dot-mini {
    width: 7px; height: 7px; border-radius: 50%;
    border: 1px solid rgba(138,0,0,0.35);
    background: transparent; transition: background 0.15s;
}
.dot-mini.active { background: var(--blood-dark); border-color: var(--blood); }
.roll-item input:checked ~ .roll-item-dots .dot-mini.active {
    background: var(--gold-dim); border-color: var(--gold);
}
.roll-item-val {
    font-family: 'Cinzel', serif; font-size: 11px;
    color: var(--gold-dim); min-width: 14px; text-align: right;
}

/* Coluna direita: config + resultado */
.roll-col-config {
    padding: 16px 20px 20px 16px;
    display: flex; flex-direction: column; gap: 14px;
    overflow-y: auto; max-height: 70vh;
}

/* Total de dados */
.roll-total-box {
    text-align: center; padding: 16px 12px;
    border: 1px solid rgba(138,0,0,0.25);
    background: rgba(0,0,0,0.2);
    position: relative;
}
.roll-total-box::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
    background: linear-gradient(90deg, transparent, var(--blood), transparent);
}
.roll-total-label {
    font-family: 'Cinzel', serif; font-size: 9px;
    letter-spacing: 0.2em; text-transform: uppercase; color: var(--gold-dim);
    margin-bottom: 6px;
}
.roll-total-num {
    font-family: 'Cinzel Decorative', serif; font-size: 32px;
    color: var(--blood-bright);
    text-shadow: 0 0 20px rgba(200,0,0,0.5);
    line-height: 1;
}
.roll-total-hint {
    font-family: 'EB Garamond', serif; font-size: 12px;
    color: var(--parchment); opacity: 0.4; margin-top: 4px;
    font-style: italic;
}

/* Dificuldade */
.roll-config-row {
    display: flex; flex-direction: column; gap: 6px;
}
.roll-config-label {
    font-family: 'Cinzel', serif; font-size: 9px;
    letter-spacing: 0.18em; text-transform: uppercase; color: var(--gold-dim);
    display: flex; align-items: center; gap: 5px;
}
.diff-row {
    display: flex; align-items: center; gap: 10px;
}
.diff-val {
    font-family: 'Cinzel Decorative', serif; font-size: 22px;
    color: var(--gold); min-width: 28px; text-align: center;
}
.diff-hint {
    font-family: 'EB Garamond', serif; font-size: 11px;
    color: var(--parchment); opacity: 0.3; font-style: italic;
}

/* Auto-roll checkbox */
.roll-auto-label {
    display: flex; align-items: center; gap: 8px; cursor: pointer;
    font-family: 'Cinzel', serif; font-size: 10px;
    letter-spacing: 0.1em; text-transform: uppercase;
    color: var(--parchment); opacity: 0.7; transition: opacity 0.2s;
}
.roll-auto-label:hover { opacity: 1; }
.roll-auto-label input { display: none; }
.roll-check-box {
    width: 14px; height: 14px; flex-shrink: 0;
    border: 1px solid rgba(201,168,76,0.3);
    background: rgba(0,0,0,0.35);
    display: inline-flex; align-items: center; justify-content: center;
    transition: all 0.15s; position: relative;
}
.roll-auto-label input:checked + .roll-check-box {
    background: var(--blood-dark); border-color: var(--blood-bright);
}
.roll-auto-label input:checked + .roll-check-box::after {
    content: '✓'; font-size: 10px; color: #ffaaaa; line-height: 1;
}
.roll-mode-hint {
    font-family: 'EB Garamond', serif; font-size: 12px;
    color: var(--parchment); opacity: 0.4; font-style: italic;
    line-height: 1.5;
}

/* Botão principal de rolagem */
.btn-roll-exec {
    font-family: 'Cinzel', serif; font-size: 12px;
    letter-spacing: 0.14em; text-transform: uppercase;
    padding: 12px 16px;
    border: 1px solid var(--blood);
    background: linear-gradient(135deg, rgba(120,0,0,0.8) 0%, rgba(70,0,0,0.95) 100%);
    color: #fff; cursor: pointer; width: 100%;
    display: flex; align-items: center; justify-content: center; gap: 8px;
    transition: all 0.2s;
    box-shadow: 0 0 14px rgba(138,0,0,0.2);
}
.btn-roll-exec:hover {
    border-color: var(--blood-bright);
    box-shadow: 0 0 28px rgba(200,0,0,0.4);
}
.btn-roll-exec:active { transform: scale(0.98); }

/* Resultado interno */
.roll-resultado {
    border: 1px solid rgba(138,0,0,0.25);
    background: rgba(0,0,0,0.25);
    padding: 12px 14px;
    animation: rollReveal 0.3s ease-out;
}
@keyframes rollReveal {
    from { opacity: 0; transform: translateY(6px); }
    to   { opacity: 1; transform: none; }
}
.roll-res-header {
    display: flex; justify-content: space-between; align-items: flex-start;
    gap: 8px; margin-bottom: 10px;
}
.roll-res-label {
    font-family: 'EB Garamond', serif; font-size: 12px;
    color: var(--parchment); opacity: 0.6; font-style: italic;
    flex: 1;
}
.roll-res-parada {
    font-family: 'Cinzel', serif; font-size: 9px;
    letter-spacing: 0.12em; color: var(--gold-dim);
    white-space: nowrap;
}
.roll-dados { display: flex; flex-wrap: wrap; gap: 5px; margin-bottom: 8px; }

/* Faces dos dados */
.dado {
    width: 28px; height: 28px;
    border-radius: 4px;
    border: 1px solid;
    display: inline-flex; align-items: center; justify-content: center;
    font-family: 'Cinzel', serif; font-size: 12px; font-weight: 700;
    transition: transform 0.1s;
    animation: dadoCair 0.25s ease-out both;
}
@keyframes dadoCair {
    from { opacity: 0; transform: translateY(-8px) rotate(-10deg); }
    to   { opacity: 1; transform: none; }
}
.dado-normal { border-color: rgba(200,184,154,0.2); color: var(--parchment); background: rgba(0,0,0,0.3); }
.dado-sucesso { border-color: rgba(80,160,80,0.5); color: #88dd88; background: rgba(0,50,0,0.4); }
.dado-um      { border-color: rgba(200,40,40,0.6); color: #ff8888; background: rgba(80,0,0,0.5); }
.dado-dez     { border-color: rgba(201,168,76,0.7); color: var(--gold); background: rgba(80,60,0,0.4); box-shadow: 0 0 8px rgba(200,160,0,0.3); }
.dado-sm { width: 22px; height: 22px; font-size: 10px; }

.roll-uns-note {
    font-family: 'EB Garamond', serif; font-size: 12px;
    color: #ff8888; opacity: 0.7; font-style: italic; margin-bottom: 6px;
}

/* Veredicto final */
.roll-veredicto {
    font-family: 'Cinzel', serif; font-size: 13px;
    letter-spacing: 0.1em; text-align: center;
    padding: 8px 12px;
    border-top: 1px solid rgba(255,255,255,0.05);
    margin-top: 6px;
}
.roll-veredicto.sucesso    { color: #88dd88; }
.roll-veredicto.critico    { color: var(--gold); text-shadow: 0 0 12px rgba(200,160,0,0.5); }
.roll-veredicto.falha      { color: var(--parchment); opacity: 0.5; }
.roll-veredicto.falha-total { color: #ff6666; animation: pulso 0.8s ease-in-out 2; }
@keyframes pulso {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
}

/* Caixa Discord */
.roll-discord-box {
    border: 1px solid rgba(114,137,218,0.25);
    background: rgba(30,30,60,0.2);
    padding: 12px 14px;
    animation: rollReveal 0.3s ease-out;
}
.discord-header {
    display: flex; align-items: center; gap: 6px;
    font-family: 'Cinzel', serif; font-size: 10px;
    letter-spacing: 0.15em; text-transform: uppercase;
    color: #7289da; margin-bottom: 6px;
}
.discord-contexto {
    font-family: 'EB Garamond', serif; font-size: 12px;
    color: var(--parchment); opacity: 0.45; font-style: italic;
    margin-bottom: 10px;
}
.discord-bots { display: flex; flex-direction: column; gap: 6px; }
.discord-bot-row {
    display: flex; align-items: center; gap: 8px;
    padding: 5px 8px; background: rgba(0,0,0,0.25);
    border: 1px solid rgba(114,137,218,0.12);
}
.bot-label {
    font-family: 'Cinzel', serif; font-size: 8px;
    letter-spacing: 0.1em; text-transform: uppercase;
    color: #7289da; min-width: 70px;
}
.bot-code {
    flex: 1; font-family: 'Courier New', monospace; font-size: 13px;
    color: #c8b8ea; letter-spacing: 0.05em;
}
.btn-copy {
    font-family: 'Cinzel', serif; font-size: 8px;
    letter-spacing: 0.1em; text-transform: uppercase;
    padding: 4px 8px;
    border: 1px solid rgba(114,137,218,0.2);
    background: transparent; color: #7289da; cursor: pointer;
    display: flex; align-items: center; gap: 4px;
    transition: all 0.2s; white-space: nowrap;
}
.btn-copy:hover { border-color: #7289da; color: #fff; background: rgba(114,137,218,0.2); }

/* ── LOG DE ROLAGENS (abaixo das fichas) ── */
.log-entry {
    padding: 8px 12px;
    border: 1px solid rgba(138,0,0,0.15);
    border-left: 2px solid rgba(138,0,0,0.4);
    background: rgba(0,0,0,0.18);
    margin-bottom: 6px;
    animation: rollReveal 0.25s ease-out;
}
.log-entry-header {
    display: flex; align-items: baseline; gap: 8px;
    margin-bottom: 6px; flex-wrap: wrap;
}
.log-personagem {
    font-family: 'Cinzel', serif; font-size: 11px;
    color: var(--bone); letter-spacing: 0.05em;
}
.log-descricao {
    font-family: 'EB Garamond', serif; font-size: 12px;
    color: var(--parchment); opacity: 0.5; font-style: italic; flex: 1;
}
.log-ts {
    font-family: 'Cinzel', serif; font-size: 9px;
    color: var(--gold-dim); opacity: 0.5; letter-spacing: 0.1em;
    white-space: nowrap;
}
.log-dados-row { display: flex; align-items: center; gap: 4px; flex-wrap: wrap; }
.log-resultado {
    font-family: 'Cinzel', serif; font-size: 11px;
    letter-spacing: 0.08em; margin-left: 6px;
}
.cor-sucesso      { color: #88dd88; }
.cor-falha        { color: var(--parchment); opacity: 0.45; }
.cor-falha-total  { color: #ff6666; }